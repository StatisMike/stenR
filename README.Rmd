---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
Sys.setenv(LANGUAGE='en')
```

# stenR

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-blue.svg)](https://lifecycle.r-lib.org/articles/stages.html#experimental)
<!-- badges: end -->

`stenR` is a package tailored mainly for creators of psychological questionnaires,
though other social science researchers and survey authors can benefit greatly
from it.

It provides straightforward framework for normalization and standardization
of raw discrete scores to standardized scale of your choosing. It follows simple
work pattern:

- create frequency table and compute Z-score corresponding to each raw score
- create score table using some standard scale.
- provide external raw score to be recalculated to standardized scale.

## Installation

You can install the current version from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("StatisMike/stenR")
```
## Procedural workflow for using stenR functionality

`stenR` currently is based on few `S3` classes and can be used in purely
procedural workflow, which will be described below. Exemplary data provided
with package will be used:

```{r exemplary_data}
library(stenR)

# data gathered in Polish sample - 204 summed results of HEXACO-60 questionnaires
str(HEXACO_60)
```

### 1. Create a Frequency Table object on basis of some variable

```{r FrequencyTable_create}
HEX_H_ft <- FrequencyTable(HEXACO_60$HEX_H)
HEX_H_ft
```

Generated warning tells us that there were some raw scores between `min()` and
`max()` values that weren't represented in the sample. We can see that was the 
case for a few scores:

```{r missing_scores}
which(HEX_H_ft$table$n == 0)
```

We can also see it while plotting the resulting *FrequencyTable*:

```{r FrequencyTable plot}
plot(HEX_H_ft)
```

By the rule of thumb: the more possible values the raw scores can get and the 
smaller your data, the bigger possibility for this to happen. If you feel that 
your sample was representative, you can ignore it. It is recommended though to 
get more varied, greater number of observations when getting this warning.

### 2. Generate ScoreTable using FrequencyTable

*FrequencyTable* is a basis for normalizing the distribution of your data. Now,
the next step is to standardize it using some *StandardScale* and generating
*ScoreTable*.

There are some *StandardScale* objects available in the package. They define
score scale. We can use the popular in psychology **STEN** scale to calculate
the scores.

```{r STEN_scale}
# check out the scale definition
STEN
# see its distribution graphically
plot(STEN)
```

Now, we can generate the ScoreTable using our FrequencyTable and scale of our
choosing.

```{r ScoreTable}
HEX_H_st <- ScoreTable(HEX_H_ft, STEN)

plot(HEX_H_st)
```

We can see that the shape of the generated distribution is similar to the
distribution associated with the *StandardScale*. It is a good sign: number
of values of raw scores is appropriate for the chosen scale. In contrast, we
can see that the **TANINE** scale would be an ill choice:

```{r HEXACO_tanine}
plot(ScoreTable(HEX_H_ft, TANINE))
```

You can also define your own *StandardScale* object using the `StandardScale`
function.

```{r StandardScale}
new_scale <- StandardScale("my_scale", 10, 3, 0, 20)

# let's see if everything is correct
new_scale

# how does its distribution looks like?
plot(new_scale)
```


### 3. Calculate score for the new results

Now, if we have our *ScoreTable* created, we can use it to standardize some
scores! We will do it for some randomly generated ones using `normalize_score()`
function:

```{r}
set.seed(2137)

# generate some random raw scores of valid values
raw_scores <- round(runif(10, min = 10, max = 50), 0)

print(raw_scores)

# and now - get the 'STEN' values!
normalize_score(
  x = raw_scores,
  table = HEX_H_st,
  what = "sten")
```

## Object oriented workflow


IN PROGRESS